{% extends 'transcribe/base.html' %}
{% load static %}

{% block title %}Audio Recorder - Transcribe{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'transcribe/css/record.css' %}">
{% endblock %}

{% block content %}
<div class="container">
    <div class="recorder-card">
        <h1>Audio Recorder</h1>
        <p class="subtitle">Click the microphone to start recording</p>

        <div class="recorder-section">
            <button id="recordBtn" class="record-button" aria-label="Start/Stop Recording">
                <img src="{% static 'transcribe/icons/microphone.svg' %}" class="mic-icon" alt="Microphone">
            </button>

            <div class="status-text" id="statusText">Ready to record</div>

            <div class="timer" id="timer" style="display: none;">
                <span id="timerDisplay">00:00</span>
            </div>
        </div>

        <div class="audio-section" id="audioSection" style="display: none;">
            <h3>Recorded Audio:</h3>
            <audio id="audioPlayer" controls></audio>
            <div class="audio-actions">
                <button id="transcribeBtn" class="action-btn primary-btn">
                    <img src="{% static 'transcribe/icons/transcribe.svg' %}" alt="Transcribe">
                    Transcribe
                </button>
                <button id="downloadBtn" class="action-btn download-btn">
                    <img src="{% static 'transcribe/icons/download.svg' %}" alt="Download">
                    Download
                </button>
                <button id="newRecordingBtn" class="action-btn secondary-btn">
                    New Recording
                </button>
            </div>
        </div>

        <div class="transcription-section" id="transcriptionSection" style="display: none;">
            <h3>Transcription:</h3>
            <div class="transcription-content">
                <div id="transcriptionLoading" class="loading-spinner" style="display: none;">
                    <div class="spinner"></div>
                    <span>Transcribing audio...</span>
                </div>
                <div id="transcriptionText" class="transcription-text"></div>
                <div class="transcription-actions">
                    <button id="copyTranscriptionBtn" class="action-btn secondary-btn" style="display: none;">
                        <img src="{% static 'transcribe/icons/copy.svg' %}" alt="Copy">
                        Copy Text
                    </button>
                </div>
            </div>
        </div>

        <div class="error-message" id="errorMessage" style="display: none;"></div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'transcribe/js/record.js' %}"></script>
{% endblock %}